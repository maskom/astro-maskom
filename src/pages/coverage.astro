---
// Coverage page - Network coverage and availability checking
import Layout from '../layouts/Layout.astro';
import AddressSearch from '../components/maps/AddressSearch.astro';
import CoverageMap from '../components/maps/CoverageMap.astro';
import AvailabilityResults from '../components/maps/AvailabilityResults.astro';
---

<Layout title="Cek Cakupan Layanan - Maskom Network">
  <main class="coverage-page">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <div class="hero-content">
          <h1>Cek Cakupan Layanan Internet</h1>
          <p>Temukan apakah layanan internet berkecepatan tinggi Maskom Network tersedia di lokasi Anda</p>
        </div>
      </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
      <div class="container">
        <div class="search-container">
          <h2>Masukkan Alamat Anda</h2>
          <p>Ketik alamat lengkap Anda untuk memeriksa ketersediaan layanan</p>
          
          <AddressSearch />
          
          <div class="search-tips">
            <h4>Tips Pencarian:</h4>
            <ul>
              <li>Masukkan alamat lengkap (jalan, nomor, kelurahan, kecamatan)</li>
              <li>Sertakan nama kota dan provinsi</li>
              <li>Gunakan tombol "Gunakan Lokasi Saya" untuk deteksi otomatis</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Map Section -->
    <section class="map-section">
      <div class="container">
        <div class="map-container">
          <h2>Peta Cakupan Layanan</h2>
          <p>Lihat area-area yang sudah terlayani dan rencana ekspansi kami</p>
          
          <CoverageMap />
        </div>
      </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="results-section">
      <div class="container">
        <AvailabilityResults />
      </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
      <div class="container">
        <h2>Mengapa Memilih Maskom Network?</h2>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
              </svg>
            </div>
            <h3>Internet Super Cepat</h3>
            <p>Nikmati kecepatan internet hingga 1000 Mbps dengan teknologi fiber optic terkini</p>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
            </div>
            <h3>99.9% Uptime</h3>
            <p>Garansi koneksi stabil dengan uptime 99.9% dan monitoring 24/7</p>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 12l2 2 4-4"></path>
                <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"></path>
                <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"></path>
                <path d="M3 12c0 4.5 3.5 8 8 8s8-3.5 8-8"></path>
              </svg>
            </div>
            <h3>Support 24/7</h3>
            <p>Tim support teknis siap membantu Anda 24 jam sehari, 7 hari seminggu</p>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                <line x1="1" y1="10" x2="23" y2="10"></line>
              </svg>
            </div>
            <h3>Harga Terjangkau</h3>
            <p>Paket internet dengan harga kompetitif tanpa mengurangi kualitas layanan</p>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
      <div class="container">
        <h2>Pertanyaan yang Sering Diajukan</h2>
        <div class="faq-list">
          <div class="faq-item">
            <h4>Bagaimana cara memeriksa ketersediaan layanan?</h4>
            <p>Masukkan alamat lengkap Anda pada kolom pencarian di atas, sistem kami akan secara otomatis memeriksa ketersediaan layanan di lokasi Anda.</p>
          </div>
          
          <div class="faq-item">
            <h4>Berapa lama proses instalasi?</h4>
            <p>Proses instalasi biasanya memakan waktu 5-10 hari kerja tergantung kompleksitas instalasi dan ketersediaan teknisi.</p>
          </div>
          
          <div class="faq-item">
            <h4>Apakah ada biaya instalasi?</h4>
            <p>Untuk sebagian besar paket, kami menyediakan instalasi gratis. Biaya tambahan mungkin berlaku untuk instalasi yang kompleks.</p>
          </div>
          
          <div class="faq-item">
            <h4>Apa yang terjadi jika layanan belum tersedia di area saya?</h4>
            <p>Anda dapat mendaftar untuk notifikasi. Kami akan menghubungi Anda segera setelah layanan tersedia di area Anda.</p>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  .coverage-page {
    min-height: 100vh;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* Hero Section */
  .hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 80px 0;
    text-align: center;
  }

  .hero-content h1 {
    font-size: 48px;
    font-weight: 700;
    margin-bottom: 24px;
    line-height: 1.2;
  }

  .hero-content p {
    font-size: 20px;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
  }

  /* Search Section */
  .search-section {
    padding: 80px 0;
    background: #f8fafc;
  }

  .search-container {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
  }

  .search-container h2 {
    font-size: 36px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 16px;
  }

  .search-container > p {
    font-size: 18px;
    color: #6b7280;
    margin-bottom: 48px;
  }

  .search-tips {
    margin-top: 32px;
    text-align: left;
    background: white;
    padding: 24px;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
  }

  .search-tips h4 {
    margin: 0 0 12px 0;
    font-size: 16px;
    font-weight: 600;
    color: #111827;
  }

  .search-tips ul {
    margin: 0;
    padding-left: 20px;
  }

  .search-tips li {
    margin-bottom: 8px;
    color: #374151;
    font-size: 14px;
  }

  /* Map Section */
  .map-section {
    padding: 80px 0;
    background: white;
  }

  .map-container {
    text-align: center;
  }

  .map-container h2 {
    font-size: 36px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 16px;
  }

  .map-container > p {
    font-size: 18px;
    color: #6b7280;
    margin-bottom: 48px;
  }

  /* Results Section */
  .results-section {
    padding: 80px 0;
    background: #f8fafc;
  }

  /* Features Section */
  .features-section {
    padding: 80px 0;
    background: white;
  }

  .features-section h2 {
    text-align: center;
    font-size: 36px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 48px;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 32px;
  }

  .feature-card {
    text-align: center;
    padding: 32px;
    background: #f8fafc;
    border-radius: 16px;
    transition: transform 0.2s ease;
  }

  .feature-card:hover {
    transform: translateY(-4px);
  }

  .feature-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 24px;
    background: #3b82f6;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .feature-card h3 {
    font-size: 20px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 12px;
  }

  .feature-card p {
    color: #6b7280;
    line-height: 1.6;
  }

  /* FAQ Section */
  .faq-section {
    padding: 80px 0;
    background: #f8fafc;
  }

  .faq-section h2 {
    text-align: center;
    font-size: 36px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 48px;
  }

  .faq-list {
    max-width: 800px;
    margin: 0 auto;
  }

  .faq-item {
    background: white;
    padding: 24px;
    border-radius: 12px;
    margin-bottom: 16px;
    border: 1px solid #e5e7eb;
  }

  .faq-item h4 {
    font-size: 18px;
    font-weight: 600;
    color: #111827;
    margin-bottom: 12px;
  }

  .faq-item p {
    color: #6b7280;
    line-height: 1.6;
    margin: 0;
  }

  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .hero-content h1 {
      font-size: 32px;
    }

    .hero-content p {
      font-size: 16px;
    }

    .search-container h2,
    .map-container h2,
    .features-section h2,
    .faq-section h2 {
      font-size: 28px;
    }

    .features-grid {
      grid-template-columns: 1fr;
      gap: 24px;
    }

    .feature-card {
      padding: 24px;
    }

    .search-section,
    .map-section,
    .results-section,
    .features-section,
    .faq-section {
      padding: 48px 0;
    }

    .hero-section {
      padding: 48px 0;
    }
  }
</style>

<script>
  // Initialize coverage page functionality
  document.addEventListener('DOMContentLoaded', () => {
    const addressInput = document.getElementById('address-input');
    const resultsSection = document.getElementById('results-section');
    
    // Handle address selection from search component
    if (addressInput) {
      addressInput.addEventListener('addressSelected', async (event) => {
        const { address, coordinates } = event.detail;
        
        // Show results section
        resultsSection?.scrollIntoView({ behavior: 'smooth' });
        
        // Check availability
        if (window.availabilityResults) {
          await window.availabilityResults.checkAvailability(address);
        }
        
        // Center map on coordinates if available
        if (coordinates && window.coverageMap) {
          window.coverageMap.centerOnCoordinates(coordinates.lat, coordinates.lng);
        }
      });
    }

    // Handle manual address submission
    const setupManualSubmit = () => {
      const form = document.querySelector('.address-search-container');
      if (!form) return;

      form.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && e.target.id === 'address-input') {
          e.preventDefault();
          const address = e.target.value.trim();
          if (address.length >= 3) {
            // Trigger availability check
            resultsSection?.scrollIntoView({ behavior: 'smooth' });
            if (window.availabilityResults) {
              window.availabilityResults.checkAvailability(address);
            }
          }
        }
      });
    };

    setupManualSubmit();
  });
</script>